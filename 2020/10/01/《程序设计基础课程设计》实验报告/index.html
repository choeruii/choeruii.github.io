<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>《程序设计基础课程设计》实验报告 | 赵宇盛的博客</title><meta name="author" content="Eason Zhao"><meta name="copyright" content="Eason Zhao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="班级：1903018         学号：19049200010         姓名：赵宇盛  完成题目1、2、3、4、5、6   第一题基本编程： 涉及知识点：流程控制、数组、函数、结构体等 要求：假设平面上有1~N(x,y)个坐标点，编程判断这N(x,y)个点能组成多少个有效三角形。 问题分析： 这道题该使用怎样的数据结构？即坐标点该如何表示？  其次，如何在n个坐标中有效全面且不重复的选">
<meta property="og:type" content="article">
<meta property="og:title" content="《程序设计基础课程设计》实验报告">
<meta property="og:url" content="https://choeruii.github.io/2020/10/01/%E3%80%8A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E3%80%8B%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/index.html">
<meta property="og:site_name" content="赵宇盛的博客">
<meta property="og:description" content="班级：1903018         学号：19049200010         姓名：赵宇盛  完成题目1、2、3、4、5、6   第一题基本编程： 涉及知识点：流程控制、数组、函数、结构体等 要求：假设平面上有1~N(x,y)个坐标点，编程判断这N(x,y)个点能组成多少个有效三角形。 问题分析： 这道题该使用怎样的数据结构？即坐标点该如何表示？  其次，如何在n个坐标中有效全面且不重复的选">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2020-10-01T08:51:31.941Z">
<meta property="article:modified_time" content="2020-10-01T08:52:16.713Z">
<meta property="article:author" content="Eason Zhao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://choeruii.github.io/2020/10/01/%E3%80%8A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E3%80%8B%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="yandex-verification" content="{&quot;theme_color&quot;:{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}}"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-10-01 16:52:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="赵宇盛的博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/Avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/list/"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">第一题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">问题分析：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">解决方案：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">算法描述：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-number">1.4.</span> <span class="toc-text">源代码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA"><span class="toc-number">1.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">第二题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">2.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">2.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.3.</span> <span class="toc-text">算法描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text">源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA-1"><span class="toc-number">2.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">第三题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90-1"><span class="toc-number">3.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1"><span class="toc-number">3.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0-1"><span class="toc-number">3.3.</span> <span class="toc-text">算法描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81-1"><span class="toc-number">3.4.</span> <span class="toc-text">源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA-2"><span class="toc-number">3.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">第四题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90-2"><span class="toc-number">4.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-2"><span class="toc-number">4.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">4.3.</span> <span class="toc-text">算法描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81-2"><span class="toc-number">4.4.</span> <span class="toc-text">源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA-3"><span class="toc-number">4.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">第五题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90-3"><span class="toc-number">5.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-3"><span class="toc-number">5.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0-3"><span class="toc-number">5.3.</span> <span class="toc-text">算法描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81-3"><span class="toc-number">5.4.</span> <span class="toc-text">源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA-4"><span class="toc-number">5.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">第六题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90-4"><span class="toc-number">6.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-4"><span class="toc-number">6.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%8F%8F%E8%BF%B0-4"><span class="toc-number">6.3.</span> <span class="toc-text">算法描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81-4"><span class="toc-number">6.4.</span> <span class="toc-text">源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE-%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA-5"><span class="toc-number">6.5.</span> <span class="toc-text">测试数据(输入、输出)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%8A%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E3%80%8B%E6%80%BB%E7%BB%93%EF%BC%88%E4%BD%93%E4%BC%9A%E3%80%81%E6%84%9F%E6%83%B3%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">《课程设计》总结（体会、感想）</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">赵宇盛的博客</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/list/"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">《程序设计基础课程设计》实验报告</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-10-01T08:51:31.941Z" title="Created 2020-10-01 16:51:31">2020-10-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-10-01T08:52:16.713Z" title="Updated 2020-10-01 16:52:16">2020-10-01</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">14.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>58min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><strong><em>班级：1903018         学号：19049200010         姓名：赵宇盛</em></strong></p>
<blockquote>
<p>完成题目1、2、3、4、5、6</p>
</blockquote>
<hr>
<h3 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a><strong>第一题</strong></h3><p>基本编程：</p>
<p>涉及知识点：流程控制、数组、函数、结构体等</p>
<p>要求：假设平面上有1~N(x,y)个坐标点，编程判断这N(x,y)个点能组成多少个有效三角形。</p>
<h4 id="问题分析："><a href="#问题分析：" class="headerlink" title="问题分析："></a>问题分析：</h4><ul>
<li><p>这道题该使用怎样的数据结构？即坐标点该如何表示？</p>
</li>
<li><p>其次，如何在n个坐标中有效全面且不重复的选择三个？（组合问题）</p>
</li>
<li><p>另外，如何判断三个坐标围城的是否为有效三角形？ </p>
</li>
</ul>
<p>主要是以上这三个问题。</p>
<h4 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h4><ul>
<li>对第一个问题：首先建立这样一个结构体，以表示坐标点。作为该题的基本数据结构。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">coordinate</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>对于第二个问题：显然从n个坐标选3个，无遗漏且不重复，那么有$C^3_n$种（排列组合）。对此，我选择采用<code>for</code>循环的三层嵌套进行枚举。(实际上也可以用DFS，枚举递归得到，不过两者所用时间复杂度都为$O(n^3)$）</p>
</li>
<li><p>对于第三个问题：我发现，当三个坐标点所围成不是三角线时，三个点处于一条直线，此时，三点间互相之间的距离出现相等关系($a+b=c$)，据此，可以确定判定条件。</p>
<p>对第二个、第三个问题的解决方案封装在自定义的函数内。</p>
</li>
</ul>
<h4 id="算法描述："><a href="#算法描述：" class="headerlink" title="算法描述："></a>算法描述：</h4><p>​        结合以上分析，显然，采用模拟算法来解决这道题。流程如下：</p>
<ul>
<li>交互读入n，表示坐标数；动态内存分配，在内存空间划出以表示n个坐标点的结构体数组；</li>
<li>交互读入n个坐标点$(x_i,y_i), i=1,2,…,n$;</li>
<li>自定义函数<code>search()</code>，对$C^3_n$种组合进行搜索、判定是否有效三角形；</li>
<li>输出计数器，释放内存，程序结束。</li>
</ul>
<h4 id="源代码："><a href="#源代码：" class="headerlink" title="源代码："></a>源代码：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> n,cnt = <span class="number">0</span>;<span class="comment">//n 坐标个数; cnt 计数器</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">coordinate</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;*p,trian[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isTriangle</span><span class="params">(coordinate,coordinate,coordinate)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;How many are the coordinates?\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    p = (struct coordinate*)<span class="built_in">malloc</span>((n+<span class="number">1</span>)*<span class="keyword">sizeof</span>(struct coordinate));<span class="comment">//动态开辟内存空间</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;put in coordinates:&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n+<span class="number">1</span>;i++)&#123;<span class="comment">//输入n个坐标点</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;p[i].x,&amp;p[i].y);</span><br><span class="line">    &#125;</span><br><span class="line">    search(n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;There are %d triangles.&quot;</span>,cnt);</span><br><span class="line">    <span class="built_in">free</span>(p);<span class="comment">//释放内存</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isTriangle</span><span class="params">(coordinate a,coordinate b ,coordinate c)</span></span>&#123;<span class="comment">//判断是否有效三角形</span></span><br><span class="line">    <span class="keyword">double</span> l1 = <span class="built_in">sqrt</span>((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y));</span><br><span class="line">    <span class="keyword">double</span> l2 = <span class="built_in">sqrt</span>((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y));</span><br><span class="line">    <span class="keyword">double</span> l3 = <span class="built_in">sqrt</span>((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y));</span><br><span class="line">    <span class="keyword">if</span>(l1+l2==l3||l1+l3==l2||l2+l3==l1)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123; <span class="comment">//搜索（三层循环嵌套）</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n+<span class="number">1</span>;i++)&#123;</span><br><span class="line">        trian[<span class="number">1</span>] = p[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;n+<span class="number">1</span>;j++)&#123;</span><br><span class="line">            trian[<span class="number">2</span>] = p[j];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=j+<span class="number">1</span>;k&lt;n+<span class="number">1</span>;k++)&#123;</span><br><span class="line">                trian[<span class="number">3</span>] = p[k];</span><br><span class="line">                <span class="keyword">if</span>(isTriangle(trian[<span class="number">1</span>],trian[<span class="number">2</span>],trian[<span class="number">3</span>]))cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试数据-输入、输出"><a href="#测试数据-输入、输出" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><p>​        示例：假设有5个坐标，分别为$(1,1),(1,2),(1,3),(0,2),(2,0)$ 。</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\1.png)</p>
<p>​        经验证，确有8个有效三角形。答案正确。</p>
<hr>
<h3 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h3><p>高精度计算 </p>
<p>涉及知识点：数组、流程控制、函数；</p>
<p>要求：用整型数组表示10进制大整数（超过$2^{32}$的整数），数组的每个元素存储大整数的一位数字，实现大整数的加减法。</p>
<h4 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h4><p>​        题目要求超过$2^{32}$的整数的加减法，运算因子超出了整型、实型表示范围。由题干要求，这里必须用数组或者是字符串表示数据。由此，用整数数组每一个元素对应一位十进制数，由其下标顺序指明位序号。</p>
<ul>
<li><p>第一个问题：如何读入、存储高精度数？</p>
</li>
<li><p>第二个问题：计算得到的结果的位数该如何确定？</p>
</li>
<li><p>第三个问题：高精度加减算法如何实现？</p>
</li>
</ul>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li><p>对于大数，采用数串形式输入，并将其转化为整数数组。即我以字符串形式读入数，再将字符串数串转化为一个整数型数组。</p>
</li>
<li><p>针对第二个问题，我用一个整数变量记录数据的实际长度（即数组的元素个数）。确定计算结果位数：对于加法而言，两数之和的位数最大为较大数的位数加<code>1</code>；对于减法而言，两数之差的位数最大为较大数的位数。</p>
</li>
<li><p>对于第三个问题，该数组的运算规则如同算术运算。即采用人工计算的方法：竖式运算。</p>
</li>
</ul>
<p>加减法运算会封装在函数里头。</p>
<h4 id="算法描述"><a href="#算法描述" class="headerlink" title="算法描述"></a>算法描述</h4><p>问题的核心在于加减法运算。由上面解决方案可知，采用是模拟人工计算的方法。如下图所示：</p>
<p><img src="C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20200522094009132.png" alt="image-20200522094009132" style="zoom:50%;" /><img src="C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20200522094602097.png" alt="image-20200522094602097" style="zoom:50%;" /></p>
<p>在上述算法当中（即对于高精度加减法自定义函数），发现如下计算特点：</p>
<p>​        对于加法而言，两个数靠右对齐，从低位向高位运算；先计算低位再计算高位。同一位的两个数相加再加上从低位来的进位，成为该位的和；这个和去掉向高位的进位就成为该位的值。到了最后一位的进位：如果完成两个数的相加后，进位位值不为0，则应添加一位；如果两个加数位数不一样多，则按位数多的一个进行计算。</p>
<p>​        对于减法运算，算法相似。</p>
<p>按照以上算法封装两个函数分别是<code>plus()</code>；<code>minus()</code>。</p>
<p>程序流程：常规的输入，字符串转化为整数型数组；调用自定义函数；输出结果。</p>
<h4 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*2.高精度计算</span></span><br><span class="line"><span class="comment">*涉及知识点：数组、流程控制、函数等</span></span><br><span class="line"><span class="comment">*要求：</span></span><br><span class="line"><span class="comment">*用整型数组表示10进制大整数（超过2^32的整数），数组的每个元素存储大整数的一位数字，实现大整数的加减法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">101</span>;</span><br><span class="line"><span class="keyword">int</span> a[MAXN],b[MAXN];</span><br><span class="line"><span class="keyword">char</span> s1[MAXN],s2[MAXN];</span><br><span class="line"><span class="keyword">char</span> clone1[MAXN],clone2[MAXN]; </span><br><span class="line"><span class="keyword">char</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">()</span></span>;<span class="comment">// 转化:字符数串——&gt;整数型数组</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">char</span> *)</span></span>; <span class="comment">//比较函数:判断两数大小关系 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myPrint</span><span class="params">(<span class="keyword">int</span> a[])</span></span>;  <span class="comment">//打印结果</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">plus</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">char</span> *)</span></span>;   <span class="comment">//高精度加法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">minus</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">char</span> *)</span></span>;  <span class="comment">//高精度减法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;高精度加减计算:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;选择&#x27;+&#x27;__加法;选择&#x27;-&#x27;__减法\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">switch</span> (n)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;输入待操作数字:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span>,s1,s2);</span><br><span class="line">        plus(s1,s2);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;输入待操作数字:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span>,s1,s2);</span><br><span class="line">        minus(s1,s2);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;输入异常！提示:只允许输入&#x27;+&#x27;或&#x27;-&#x27;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">()</span></span>&#123;<span class="comment">// 转化:字符数串——&gt;整数型数组</span></span><br><span class="line">    a[<span class="number">0</span>] = <span class="built_in">strlen</span>(s1);<span class="comment">//用a[0]计算字符串s的位数 </span></span><br><span class="line">    b[<span class="number">0</span>] = <span class="built_in">strlen</span>(s2);<span class="comment">//用b[0]计算字符串s的位数 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;a[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;<span class="comment">//将数串s1转换为数组a，并倒序存储． </span></span><br><span class="line">        a[i] = s1[a[<span class="number">0</span>]-i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;b[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;<span class="comment">//将数串s2转换为数组b，并倒序存储． </span></span><br><span class="line">        b[i] = s2[b[<span class="number">0</span>]-i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">char</span> *s1,<span class="keyword">char</span> *s2)</span></span>&#123;<span class="comment">//比较函数:判断两数大小关系</span></span><br><span class="line">    <span class="keyword">int</span> mark = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strlen</span>(s1)&gt;<span class="built_in">strlen</span>(s2))&#123;</span><br><span class="line">        mark = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strlen</span>(s1)==<span class="built_in">strlen</span>(s2))&#123;</span><br><span class="line">        mark = <span class="built_in">strcmp</span>(s1,s2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strlen</span>(s1)&lt;<span class="built_in">strlen</span>(s2))&#123;</span><br><span class="line">        mark = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> mark; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myPrint</span><span class="params">(<span class="keyword">int</span> a[])</span></span>&#123;<span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=a[<span class="number">0</span>];i&gt;<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *加法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">plus</span><span class="params">(<span class="keyword">char</span> *s1,<span class="keyword">char</span> *s2)</span></span>&#123; </span><br><span class="line">    <span class="built_in">strcpy</span>(clone1,s1);</span><br><span class="line">    <span class="built_in">strcpy</span>(clone2,s2);</span><br><span class="line">    trans();</span><br><span class="line">    <span class="keyword">if</span>(a[<span class="number">0</span>]&lt;b[<span class="number">0</span>])a[<span class="number">0</span>] = b[<span class="number">0</span>];<span class="comment">//确定加法最大位数 </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a[<span class="number">0</span>]+<span class="number">1</span>;i++)a[i]+=b[i];<span class="comment">//逐位相加</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;<span class="comment">//处理进位</span></span><br><span class="line">        a[i+<span class="number">1</span>]+=a[i]/<span class="number">10</span>;</span><br><span class="line">        a[i]%=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(a[a[<span class="number">0</span>]+<span class="number">1</span>]&gt;<span class="number">0</span>)a[<span class="number">0</span>]++;<span class="comment">//修正新的a的位数（a+b最多只能的一个进位） </span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s + %s = &quot;</span>,clone1,clone2);</span><br><span class="line">    myPrint(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *减法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">minus</span><span class="params">(<span class="keyword">char</span> *s1,<span class="keyword">char</span> *s2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag;flag = compare(s1,s2);</span><br><span class="line">    <span class="built_in">strcpy</span>(clone1,s1);</span><br><span class="line">    <span class="built_in">strcpy</span>(clone2,s2);</span><br><span class="line">    trans();</span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="number">0</span>)&#123;<span class="comment">//a=b 返回0</span></span><br><span class="line">        a[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s - %s = &quot;</span>,clone1,clone2);</span><br><span class="line">        myPrint(a);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="number">1</span>)&#123;<span class="comment">//a&gt;b 返回1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&lt;b[i])&#123;a[i+<span class="number">1</span>]--;a[i]+=<span class="number">10</span>;&#125;<span class="comment">//若不够减则向上借一位</span></span><br><span class="line">            a[i] = a[i] - b[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(a[a[<span class="number">0</span>]]==<span class="number">0</span>)a[<span class="number">0</span>]--;<span class="comment">//修正a的位数 </span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s - %s = &quot;</span>,clone1,clone2);</span><br><span class="line">        myPrint(a);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="number">-1</span>)&#123;<span class="comment">//a&lt;b 返回-1 </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;b[<span class="number">0</span>]+<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;b[i])&#123;b[i+<span class="number">1</span>]--;b[i]+=<span class="number">10</span>;&#125;<span class="comment">//若不够减则向上借一位</span></span><br><span class="line">            a[i] = b[i] - a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        a[<span class="number">0</span>] = b[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">while</span>(a[a[<span class="number">0</span>]]==<span class="number">0</span>) a[<span class="number">0</span>]--;<span class="comment">//修正a的位数 </span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s - %s = &quot;</span>,clone1,clone2);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">        myPrint(a);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试数据-输入、输出-1"><a href="#测试数据-输入、输出-1" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><p>​        由于$2^{32} = 4,294,967,296 $ 。因此尝试这样一个示例：</p>
<p>​                a = <code>4,294,967,297</code>（即$2^{32}+1$）；b = <code> 4,294,967,297,297</code>（比$2^{32}$大很多很多）</p>
<p>测试结果如下：**(<strong>$\color{red}{划红线}$</strong>)**</p>
<p>测试如下：</p>
<p>![图1](F:\大学事务\大一第二学期 事务\程序设计基础实验\2.1.png)</p>
<p>![2.2](F:\大学事务\大一第二学期 事务\程序设计基础实验\2.2.png)</p>
<p>![2.3](F:\大学事务\大一第二学期 事务\程序设计基础实验\2.3.png)</p>
<p>​        如上图所示，按从上到下顺序结果分别是：</p>
<p>$4294967297 + 4294967297297 = 4299262264594$；$4294967297297 - 4294967297 = 4290672330000$；$4294967297 - 4294967297297 = -4290672330000$.</p>
<p>​        经验证，上述结果正确。</p>
<hr>
<h3 id="第三题"><a href="#第三题" class="headerlink" title="第三题"></a>第三题</h3><p>简单数据结构-堆栈模拟</p>
<p>涉及知识点：内存管理、结构体定义、基本数据结构</p>
<p>要求：编写一个程序模拟堆栈，要求能够模拟入栈、出栈、返回栈顶元素等基本操作。栈中元素可用整数代替。不能使用C++模板库预定义的类型。程序运行中可输入多组入栈、出栈操作，每次操作后展示栈中元素。</p>
<h4 id="问题分析-1"><a href="#问题分析-1" class="headerlink" title="问题分析"></a>问题分析</h4><p>​        在数据结构概念里，堆栈是一种具有一定操作约束的线性表(出入口唯一且一致，栈中元素在栈顶操作，遵循后入先出)。由题意易知，应当定义以下三个操作，元素出栈(<code>pop()</code>)、元素入栈(<code>push()</code>)、返回栈顶元素(<code>stack.top()</code>)。</p>
<p>​        具体操作集包括：</p>
<p>1、创建一个空栈；</p>
<p>2、判断栈是否满(<code>isFull()</code>)或是否空(<code>isEmpty()</code>)；</p>
<p>3、将整型数据放入栈顶；</p>
<p>4、从栈顶弹出一个整型数据。</p>
<p>以下是解决方案。</p>
<h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li>首先。我们以数组作为栈的载体，模拟栈的数据结构。因此，我决定采用堆栈的的顺序存储实现(链式存储实现则用链表模拟栈的数据结构)，显然，使用结构体表示，如下：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data[MAXN];<span class="comment">//栈的顺序存储结构</span></span><br><span class="line">	<span class="keyword">int</span> top=<span class="number">-1</span>;<span class="comment">//栈顶元素索引,初始化为-1</span></span><br><span class="line">&#125;myStack;</span><br></pre></td></tr></table></figure>

<p>通过初始化，以创建一个<code>myStack</code>结构体——创建一个空栈。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(myStack **<span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//初始化 </span></span><br><span class="line">    *<span class="built_in">stack</span> = (myStack*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(myStack));<span class="comment">//内存分配 得到一空栈</span></span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>判断栈是否满(<code>isFull()</code>)或是否空(<code>isEmpty()</code>)，对于每次操作后即入栈及出栈后，如果栈顶元素索引<code>stack.top</code>等于<code>MAXN-1</code>，则栈满；如果栈顶元素索引<code>stack.top</code>等于<code>-1</code>，则栈空。相关函数封装在入栈、出栈函数内。</p>
<ul>
<li>入栈。封装成自定义函数<code>push()</code>，代码如下：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(myStack* <span class="built_in">stack</span>, <span class="keyword">int</span> in)</span></span>&#123;<span class="comment">//入栈</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top == MAXN<span class="number">-1</span>)&#123; <span class="comment">//栈满</span></span><br><span class="line">		isFull = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;top++;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;data[<span class="built_in">stack</span>-&gt;top] = in;</span><br><span class="line">	isFull = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>出栈。封装成自定义函数<code>push()</code>，代码如下：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(myStack* <span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//出栈</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top == <span class="number">-1</span>)&#123; <span class="comment">//栈空</span></span><br><span class="line">		isEmpty = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;top--;</span><br><span class="line">	isEmpty = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>返回栈顶元素。我将其封装在自定义函数<code>top()</code>内。代码如下：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">top</span><span class="params">(myStack* <span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//打印栈顶元素</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;此时栈顶元素为[%d],&quot;</span>,<span class="built_in">stack</span>-&gt;data[<span class="built_in">stack</span>-&gt;top]);</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="算法描述-1"><a href="#算法描述-1" class="headerlink" title="算法描述"></a>算法描述</h4><p>​        显然，这是模拟算法。即顺序流下模拟堆栈结构。</p>
<p>​        核心问题在于关键操作的函数式封装：如入栈、出栈、返回栈顶元素等。我通过将关键步骤拆分、封装。在主函数内按需调用。我觉得，这体现了算法当中的分治思想。用分治法来编写较为复杂代码（或者说功能多样），易于阅读，也易于修改。</p>
<h4 id="源代码-1"><a href="#源代码-1" class="headerlink" title="源代码"></a>源代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*3.简单数据结构-堆栈模拟</span></span><br><span class="line"><span class="comment">涉及知识点：内存管理、结构体定义、基本数据结构</span></span><br><span class="line"><span class="comment">要求：</span></span><br><span class="line"><span class="comment">编写一个程序模拟堆栈，要求能够模拟入栈、出栈、返回栈顶元素等基本操作。</span></span><br><span class="line"><span class="comment">栈中元素可用整数代替。不能使用C++模板库预定义的类型。</span></span><br><span class="line"><span class="comment">程序运行中可输入多组入栈、出栈操作，每次操作后展示栈中元素。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">int</span> isEmpty,isFull;<span class="comment">//或栈空  或栈满</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data[MAXN];</span><br><span class="line">	<span class="keyword">int</span> top=<span class="number">-1</span>;</span><br><span class="line">&#125;myStack;</span><br><span class="line">myStack *<span class="built_in">stack</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(myStack**)</span></span>;<span class="comment">//初始化空栈</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(myStack*, <span class="keyword">int</span>)</span></span>;<span class="comment">//入栈</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(myStack*)</span></span>;<span class="comment">//出栈</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">top</span><span class="params">(myStack*)</span></span>;<span class="comment">//打印栈顶元素</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;<span class="comment">//打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	init(&amp;<span class="built_in">stack</span>);<span class="comment">//初始化 得到一空栈</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*操作说明示例:</span></span><br><span class="line"><span class="comment"> *1、入栈 1 2 3 4  栈顶4 </span></span><br><span class="line"><span class="comment"> *2、出栈 4 3 栈顶2</span></span><br><span class="line"><span class="comment"> *3、入栈 5 栈顶5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		push(<span class="built_in">stack</span>, <span class="number">1</span>);push(<span class="built_in">stack</span>, <span class="number">2</span>);push(<span class="built_in">stack</span>, <span class="number">3</span>);push(<span class="built_in">stack</span>, <span class="number">4</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;操作1:入栈1 2 3 4\n&quot;</span>);</span><br><span class="line">		top(<span class="built_in">stack</span>);print();<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        pop(<span class="built_in">stack</span>);pop(<span class="built_in">stack</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;操作2:出栈4 3\n&quot;</span>);</span><br><span class="line">		top(<span class="built_in">stack</span>);print();<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		push(<span class="built_in">stack</span>,<span class="number">5</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;操作3:入栈5\n&quot;</span>);</span><br><span class="line">		top(<span class="built_in">stack</span>);print();<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(myStack **<span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//初始化 得到一空栈</span></span><br><span class="line">    *<span class="built_in">stack</span> = (myStack*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(myStack));</span><br><span class="line">	<span class="keyword">if</span>(*<span class="built_in">stack</span> == <span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	(*<span class="built_in">stack</span>)-&gt;top = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(myStack* <span class="built_in">stack</span>, <span class="keyword">int</span> in)</span></span>&#123;<span class="comment">//入栈</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top == MAXN<span class="number">-1</span>)&#123; <span class="comment">//栈满</span></span><br><span class="line">		isFull = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;top++;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;data[<span class="built_in">stack</span>-&gt;top] = in;</span><br><span class="line">	isFull = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(myStack* <span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//出栈</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top == <span class="number">-1</span>)&#123; <span class="comment">//栈空</span></span><br><span class="line">		isEmpty = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;top--;</span><br><span class="line">	isEmpty = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">top</span><span class="params">(myStack* <span class="built_in">stack</span>)</span></span>&#123;<span class="comment">//打印栈顶元素</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;此时栈顶元素为[%d],&quot;</span>,<span class="built_in">stack</span>-&gt;data[<span class="built_in">stack</span>-&gt;top]);</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;<span class="comment">//打印栈中元素</span></span><br><span class="line">	<span class="keyword">int</span> clone = <span class="built_in">stack</span>-&gt;top;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;此时栈中元素为:&quot;</span>);</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">stack</span>-&gt;top != <span class="number">-1</span>) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;[%d] &quot;</span>,<span class="built_in">stack</span>-&gt;data[<span class="built_in">stack</span>-&gt;top]);	</span><br><span class="line">		<span class="built_in">stack</span>-&gt;top--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">stack</span>-&gt;top = clone;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试数据-输入、输出-2"><a href="#测试数据-输入、输出-2" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><p>正如源代码中注释所示，提供这样一个示例：</p>
<ul>
<li><p>操作1、入栈<code>1 2 3 4 </code>（栈顶4） </p>
</li>
<li><p>操作2、出栈 <code>4 3 </code>（栈顶2）</p>
</li>
<li><p>操作3、入栈<code>5</code>（栈顶5） </p>
</li>
</ul>
<p>结果如下：</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\3.1.png)</p>
<p>经验证，结果正确。</p>
<hr>
<h3 id="第四题"><a href="#第四题" class="headerlink" title="第四题"></a>第四题</h3><p>位图图像文件缩放</p>
<p>涉及知识点：文件读写、结构体定义、内存管理、基本图像处理算法、命令行参数</p>
<p>要求：编写一个程序，可以在命令行输入参数，完成指定文件的缩放，并存储到新文件，命令行参数如下:</p>
<p><code>zoom file1.bmp 200 file2.bmp</code></p>
<p>第一个参数为可执行程序名称，第二个参数为原始图像文件名，第三个参数为缩放比例（百分比），第四个参数为新文件名</p>
<h4 id="问题分析-2"><a href="#问题分析-2" class="headerlink" title="问题分析"></a>问题分析</h4><p>以下内容参考了<a target="_blank" rel="noopener" href="https://blog.csdn.net/dalehui/article/details/12835753">这篇文章</a>。</p>
<p>​        BMP文件总体上由4部分组成，分别是位图文件头（bitmap-file header）、位图信息头（bitmap-information header）、调色板（color table）和图像数据（bitmap-data）。</p>
<p>由于调色板一会儿用不到，不做详细介绍，以下主要介绍文件头和信息头。</p>
<ul>
<li>位图文件头（bitmap-file header）包含了图像类型、图像大小、图像数据存放地址和两个保留未使用的字段。其内部字段定义如下表：</li>
</ul>
<table>
<thead>
<tr>
<th>字 段 名</th>
<th>大小（单位：字节）</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>bfType</code></td>
<td>2</td>
<td>位图类别，根据不同的操作系统而不同，在Windows中，此字段的值总为<code>BM</code></td>
</tr>
<tr>
<td><code>bfSize</code></td>
<td>4</td>
<td>BMP图像文件的大小</td>
</tr>
<tr>
<td><code>bfReserved1</code></td>
<td>2</td>
<td>总为0</td>
</tr>
<tr>
<td><code>bfReserved2</code></td>
<td>2</td>
<td>总为0</td>
</tr>
<tr>
<td><code>bfOffBits</code></td>
<td>4</td>
<td>BMP图像数据的地址</td>
</tr>
</tbody></table>
<p><code>bfType</code> 图片的类型 必须是<code>BM</code> 填<code>0x4d42</code>即十进制的19778</p>
<p><code>bfOffBits</code> 从文件头开始到颜色数据的偏移量 <code>54+sizeof(RGBQUAD)*256</code></p>
<p><code>bfSize</code> 图片的大小，<code>bfOffBits</code> + 长 X 宽 X 位数，例如对于128X128X24位的图像 <code>bfSize</code>=<code>128X128X24 + 54+sizeof(RGBQUAD)*256</code></p>
<p><code>bfReserved1</code>和<code>bfReserved1</code>必须为0</p>
<ul>
<li>位图信息头（bitmap-information header）包含了位图信息头的大小、图像的宽高、图像的色深、压缩说明图像数据的大小和其他一些参数。其内部字段定义如下表：</li>
</ul>
<table>
<thead>
<tr>
<th>字 段 名</th>
<th align="left">大小（单位：字节）</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>biSize</code></td>
<td align="left">4</td>
<td>本结构的大小，根据不同的操作系统而不同，在Windows中，此字段的值总为28h字节=40字节</td>
</tr>
<tr>
<td><code>biWidth</code></td>
<td align="left">4</td>
<td>BMP图像的宽度，单位像素</td>
</tr>
<tr>
<td><code>biHeight</code></td>
<td align="left">4</td>
<td>BMP图像的长度，单位像素</td>
</tr>
<tr>
<td><code>biPlanes</code></td>
<td align="left">2</td>
<td>总为1</td>
</tr>
<tr>
<td><code>biBitCount</code></td>
<td align="left">2</td>
<td>BMP图像的色深，即一个像素用多少位表示，常见有1、4、8、16、24和32，分别对应单色、16色、256色、16位高彩色、24位真彩色和32位增强型真彩色</td>
</tr>
<tr>
<td><code>biCompression</code></td>
<td align="left">4</td>
<td>压缩方式，0表示不压缩，1表示RLE8压缩，2表示RLE4压缩，3表示每个像素值由指定的掩码决定</td>
</tr>
<tr>
<td><code>biSizeImage</code></td>
<td align="left">4</td>
<td>BMP图像数据大小，必须是4的倍数，图像数据大小不是4的倍数时用0填充补足</td>
</tr>
<tr>
<td><code>biXPelsPerMeter</code></td>
<td align="left">4</td>
<td>水平分辨率，单位像素/m</td>
</tr>
<tr>
<td><code>biYPelsPerMeter</code></td>
<td align="left">4</td>
<td>垂直分辨率，单位像素/m</td>
</tr>
<tr>
<td><code>biClrUsed</code></td>
<td align="left">4</td>
<td>BMP图像使用的颜色，0表示使用全部颜色，对于256色位图来说，此值为100h=256</td>
</tr>
<tr>
<td><code>biClrImportant</code></td>
<td align="left">4</td>
<td>重要的颜色数，此值为0时所有颜色都重要，对于使用调色板的BMP图像来说，当显卡不能够显示所有颜色时，此值将辅助驱动程序显示颜色</td>
</tr>
</tbody></table>
<p> 由上可知，<code>biSize</code>包含的是这个结构体(即<code>BITMAPINFOHEADER</code>)的大小（包括颜色表），总为40；</p>
<p><code>biWidth</code>和<code>biHeight</code>分别是图片的长宽；</p>
<p><code>biPlanes</code>是目标绘图设备包含的层数，必须设置为1；</p>
<p><code>biBitCount</code>是图像的位数，例如24位，8位等；</p>
<p><code>biXPelsPerMeter</code>，<code>biYPelsPerMeter</code> 是现实世界中每米包含的像素数，设为0即可；</p>
<p><code>biSizeImage</code>图像数据的大小 =<code>biWidth X biHeight X biBitCount</code>。</p>
<p>以上是BMP文件的基本信息。</p>
<p>除此之外，BMP文件的存储运行特定如下：</p>
<ul>
<li><p>规定BMP文件的像素数据是按行存储的,而且每行的字节数必须为4的倍数。</p>
</li>
<li><p>BMP文件的位深一般是24位，以下示例也是使用24位位深的图像。</p>
</li>
</ul>
<p>亟需解决的问题如下:</p>
<ul>
<li>对BMP文件结构的具体分析，以及基于该分析的二进制源文件的读写问题。（对于放缩图像操作相关的有效信息如上）</li>
<li>如何进行缩放？（图像缩放的算法问题）</li>
</ul>
<h4 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li><p>对于BMP文件的读写——以二进制的方式读入或写入指定的图像文件；</p>
</li>
<li><p>对于图像缩放，查询资料以及参考相关开源源代码，此处使用双线性内插值算法。此处需要贴一个链接<a href="%5Bhttps://baike.baidu.com/item/%E5%8F%8C%E7%BA%BF%E6%80%A7%E5%86%85%E6%8F%92%E6%B3%95/4636970?fr=aladdin%5D(https://baike.baidu.com/item/%E5%8F%8C%E7%BA%BF%E6%80%A7%E5%86%85%E6%8F%92%E6%B3%95/4636970?fr=aladdin)">双线性内插值算法-百度百科</a></p>
</li>
</ul>
<h4 id="算法描述-2"><a href="#算法描述-2" class="headerlink" title="算法描述"></a>算法描述</h4><ul>
<li>通过C语言中的文件操作对BMP文件进行读写:</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FILE *fp=fopen(bmpName,<span class="string">&quot;rb&quot;</span>);<span class="comment">//只读打开一个二进制文件,只允许读数据</span></span><br><span class="line">......</span><br><span class="line">FILE *fp = fopen(bmpName,<span class="string">&quot;wb&quot;</span>);<span class="comment">//只写方式打开或新建一个二进制文件，只允许写数据    </span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>封装三个函数，分别是<code>ReadBmp()</code>、<code>SaveBmp()</code>、<code>Zoom()</code>，分别用于读取原图、保存缩放后图、以及对原图进行缩放。</p>
</li>
<li><p><code>Zoom()</code>函数中使用双线性内插值算法进行图像缩放。</p>
</li>
</ul>
<p>其算法描述如下：</p>
<p>对于一个目的像素，设置坐标通过反向变换得到的浮点坐标为<code>(i+u,j+v) </code>(其中<code>i</code>、<code>j</code>均为浮点坐标的整数部分，u、v为浮点坐标的小数部分，是取值[0,1)区间的浮点数)，则这个像素得值 <code>f(i+u,j+v) </code>可由原图像中坐标为<code> (i,j)</code>、<code>(i+1,j)</code>、<code>(i,j+1)</code>、<code>(i+1,j+1)</code>所对应的周围四个像素的值决定，即：</p>
<p>$f(i+u,j+v) = (1-u)(1-v)f(i,j) + (1-u)vf(i,j+1) + u(1-v)f(i+1,j) + uvf(i+1,j+1) $</p>
<p>其中<code>f(i,j)</code>表示源图像<code>(i,j)</code>处的的像素值，以此类推。</p>
<p>该算法写成代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *双线性内插值算法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span>((j0 &gt;= <span class="number">0</span>) &amp;&amp; (j0 &lt; IWidth<span class="number">-1</span>) &amp;&amp; (i0 &gt;=<span class="number">0</span>)&amp;&amp; (i0 &lt;IHeight<span class="number">-1</span>))&#123;</span><br><span class="line">		*(pINewBuf+i*INewLineByte+j*<span class="number">3</span>+k) = </span><br><span class="line">            *(pIBuf+i2*ILineByte+j2*<span class="number">3</span>+k)*s1+*(pIBuf+i1*ILineByte+j2*<span class="number">3</span>+k)*s2</span><br><span class="line">            +*(pIBuf+i1*ILineByte+j1*<span class="number">3</span>+k)*s3+*(pIBuf+i2*ILineByte+j1*<span class="number">3</span>+k)*s4;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		*(pINewBuf+i*INewLineByte+j*<span class="number">3</span>+k)=<span class="number">255</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="源代码-2"><a href="#源代码-2" class="headerlink" title="源代码"></a>源代码</h4><p>以下的源代码参考了<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33877092/article/details/85912907">这篇妙文</a>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*4.位图图像文件缩放</span></span><br><span class="line"><span class="comment">**涉及知识点：文件读写、结构体定义、内存管理、基本图像处理算法、命令行参数</span></span><br><span class="line"><span class="comment">*要求：</span></span><br><span class="line"><span class="comment">*编写一个程序，可以在命令行输入参数，完成指定文件的缩放，并存储到新文件，命令行参数如下</span></span><br><span class="line"><span class="comment">*zoom file1.bmp 200 file2.bmp</span></span><br><span class="line"><span class="comment">*第一个参数为可执行程序名称，第二个参数为原始图像文件名，第三个参数为缩放比例（百分比），第四个参数为新文件名</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*原图像的宽  原图像的高  每像素位数  新图像的宽  新图像的高  </span></span><br><span class="line"><span class="comment"> *原图像数据每行的字节数  新图像数据每行的字节数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">long</span> IWidth,IHeight,biBitCount,INewWidth,INewHeight,ILineByte,INewLineByte;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> zoomnumInit;    </span><br><span class="line"><span class="keyword">float</span> zoomnum;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *pIBuf; <span class="comment">//原图像像素指针  </span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *pINewBuf;<span class="comment">//新图像像素指针</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ReadBmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>*)</span></span>;<span class="comment">//查看原图像</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SaveBmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>*,<span class="keyword">unsigned</span> <span class="keyword">char</span>*,<span class="keyword">int</span>,<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;<span class="comment">//保存放缩后图像</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Zoom</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>*,<span class="keyword">const</span> <span class="keyword">char</span>*)</span></span>;<span class="comment">//放缩函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span>** argv)</span></span>&#123;</span><br><span class="line"> zoomnumInit=atoi(argv[<span class="number">2</span>]);<span class="comment">//放缩比例 </span></span><br><span class="line"> zoomnum=zoomnumInit*<span class="number">1.0</span>/<span class="number">100.0</span>;<span class="comment">//整数--&gt;浮点数</span></span><br><span class="line"> Zoom(argv[<span class="number">1</span>],argv[<span class="number">3</span>]); <span class="comment">//原图像--&gt;放缩后的图像</span></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>; 	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ReadBmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* bmpName)</span></span>&#123;</span><br><span class="line">	FILE *fp=fopen(bmpName,<span class="string">&quot;rb&quot;</span>);<span class="comment">//只读打开一个二进制文件,只允许读数据</span></span><br><span class="line">	<span class="keyword">if</span>(fp==<span class="number">0</span>)&#123; <span class="built_in">printf</span>(<span class="string">&quot;打开文件失败\n&quot;</span>);<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">	fseek(fp,<span class="keyword">sizeof</span>(BITMAPFILEHEADER),<span class="number">0</span>);</span><br><span class="line">	BITMAPINFOHEADER head;<span class="comment">//位图信息头</span></span><br><span class="line">	fread(&amp;head,<span class="keyword">sizeof</span>(BITMAPINFOHEADER),<span class="number">1</span>,fp);</span><br><span class="line">	IWidth = head.biWidth;<span class="comment">//宽</span></span><br><span class="line">	IHeight = head.biHeight;<span class="comment">//高</span></span><br><span class="line">	biBitCount = head.biBitCount;<span class="comment">//一像素所占位数</span></span><br><span class="line">	ILineByte = (IWidth *biBitCount/<span class="number">8</span>+<span class="number">3</span>)/<span class="number">4</span>*<span class="number">4</span>;<span class="comment">//一个扫描行所占字节数</span></span><br><span class="line">    pIBuf = (<span class="keyword">unsigned</span> <span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">unsigned</span> <span class="keyword">char</span>)*ILineByte *IHeight);<span class="comment">//定义一个矩阵用以存放原图像像素信息。pIBuf指向首地址</span></span><br><span class="line"><span class="comment">/*获取源文件像素信息。</span></span><br><span class="line"><span class="comment"> *接收地址pIBuf，单个元素大小1字节，元素个数每行字节数*行数，输入流fp</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">	fread(pIBuf,<span class="number">1</span>,ILineByte *IHeight,fp);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SaveBmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* bmpName,<span class="keyword">unsigned</span> <span class="keyword">char</span> *imgBuf,<span class="keyword">int</span> width,<span class="keyword">int</span> height,<span class="keyword">int</span> biBitCount)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!imgBuf)<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//假设没有像素数据传入，则函数返回</span></span><br><span class="line">	INewLineByte = (width * biBitCount/<span class="number">8</span>+<span class="number">3</span>)/<span class="number">4</span>*<span class="number">4</span>;<span class="comment">//计算新图像每行字节数。/4*4以保证是4的倍数</span></span><br><span class="line">	FILE *fp = fopen(bmpName,<span class="string">&quot;wb&quot;</span>);<span class="comment">//只写方式打开或新建一个二进制文件，只允许写数据</span></span><br><span class="line">	<span class="keyword">if</span>(fp == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	BITMAPFILEHEADER fileHead;<span class="comment">//位图文件头	(申请位图文件头结构变量，填写文件头信息)</span></span><br><span class="line">	fileHead.bfType= <span class="number">0x4d42</span>;<span class="comment">//bmp类型  0x42:=B  0x4d:=M</span></span><br><span class="line">	fileHead.bfSize = <span class="keyword">sizeof</span>(BITMAPFILEHEADER)+<span class="keyword">sizeof</span>(BITMAPINFOHEADER)+ INewLineByte *height;</span><br><span class="line">	fileHead.bfReserved1 = <span class="number">0</span>;<span class="comment">//保留字</span></span><br><span class="line">	fileHead.bfReserved2 = <span class="number">0</span>;<span class="comment">//保留字</span></span><br><span class="line">	fileHead.bfOffBits = <span class="number">54</span>;<span class="comment">// 从文件头到像素数据的偏移</span></span><br><span class="line">	fwrite(&amp;fileHead,<span class="keyword">sizeof</span>(BITMAPFILEHEADER),<span class="number">1</span>,fp);</span><br><span class="line">	BITMAPINFOHEADER head;<span class="comment">//位图信息头</span></span><br><span class="line">	head.biBitCount = biBitCount;<span class="comment">// 一像素所占的位数</span></span><br><span class="line">	head.biClrImportant = <span class="number">0</span>;<span class="comment">//此值为0时所有颜色都重要</span></span><br><span class="line">	head.biClrUsed = <span class="number">0</span>;<span class="comment">//BMP图像使用的颜色，0表示使用全部颜色</span></span><br><span class="line">	head.biCompression = <span class="number">0</span>;<span class="comment">//压缩方式，0表示不压缩</span></span><br><span class="line">	head.biHeight = height;</span><br><span class="line">	head.biPlanes =<span class="number">1</span>;<span class="comment">//目标绘图设备包含的层数，必须设置为1</span></span><br><span class="line">	head.biSize = <span class="number">40</span>;<span class="comment">//BITMAPINFOHEADER 大小 </span></span><br><span class="line">	head.biSizeImage = ILineByte *height;<span class="comment">//实际的位图数据占用的字节数 = 一个扫描行所占字节数 * 高度</span></span><br><span class="line">	head.biWidth = width;</span><br><span class="line">	head.biXPelsPerMeter = <span class="number">0</span>;<span class="comment">//指定目标设备的水平分辨率</span></span><br><span class="line">	head.biYPelsPerMeter = <span class="number">0</span>;<span class="comment">//指定目标设备的垂直分辨率</span></span><br><span class="line">	fwrite(&amp;head,<span class="keyword">sizeof</span>(BITMAPINFOHEADER),<span class="number">1</span>,fp);<span class="comment">//写入信息头</span></span><br><span class="line">	fwrite(imgBuf,height * INewLineByte,<span class="number">1</span>,fp);<span class="comment">//写入像素数据</span></span><br><span class="line">	fclose(fp);<span class="comment">//关闭文件</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Zoom</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* readPath,<span class="keyword">const</span> <span class="keyword">char</span>* address)</span></span>&#123;</span><br><span class="line">	ReadBmp(readPath);</span><br><span class="line">	INewWidth = (<span class="keyword">int</span>) (IWidth * zoomnumber +<span class="number">0.5</span>);<span class="comment">//图宽缩放</span></span><br><span class="line">	INewHeight = (<span class="keyword">int</span>) (IHeight * zoomnumber +<span class="number">0.5</span>);<span class="comment">//图高缩放</span></span><br><span class="line">	ILineByte =(IWidth*biBitCount/<span class="number">8</span>+<span class="number">3</span>)/<span class="number">4</span>*<span class="number">4</span>;<span class="comment">//一个扫描行所占字节数（原图）</span></span><br><span class="line">	INewLineByte = (INewWidth * biBitCount/<span class="number">8</span>+<span class="number">3</span>)/<span class="number">4</span>*<span class="number">4</span>;<span class="comment">//一个扫描行所占字节数（压缩后）</span></span><br><span class="line">    pINewBuf = (<span class="keyword">unsigned</span> <span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">unsigned</span> <span class="keyword">char</span>)*INewLineByte * INewHeight);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">long</span> i;  <span class="comment">//循环变量（像素在新图像中的坐标）     </span></span><br><span class="line">	<span class="keyword">long</span> j;</span><br><span class="line">	<span class="keyword">long</span> k;	<span class="comment">//色彩选择，k=0时为蓝色，k=1时为绿色，k=2时为红色     </span></span><br><span class="line">	<span class="keyword">long</span> i0;	<span class="comment">//像素在原图像中的坐标	  </span></span><br><span class="line">	<span class="keyword">long</span> j0;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; INewHeight;i++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; INewWidth;j++)</span><br><span class="line">				<span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++)&#123; <span class="comment">//k=0,1,2</span></span><br><span class="line">					i0 = (<span class="keyword">int</span>)(i/zoomnumber+<span class="number">0.5</span>); </span><br><span class="line">					j0 = (<span class="keyword">int</span>)(j/zoomnumber+<span class="number">0.5</span>);</span><br><span class="line">					<span class="keyword">int</span> i1 = (<span class="keyword">int</span>)i0;</span><br><span class="line">					<span class="keyword">int</span> i2 = i1 + <span class="number">1</span>;</span><br><span class="line">					<span class="keyword">int</span> j1 = (<span class="keyword">int</span>)j0;</span><br><span class="line">					<span class="keyword">int</span> j2 = j1+<span class="number">1</span>;</span><br><span class="line">					<span class="keyword">double</span> fx1 = i0 - i1;</span><br><span class="line">					<span class="keyword">double</span> fx2 = <span class="number">1.0</span> - fx1;</span><br><span class="line">					<span class="keyword">double</span> fy1 = j0 - j1;</span><br><span class="line">					<span class="keyword">double</span> fy2 = <span class="number">1.0</span> - fy1;</span><br><span class="line">					<span class="keyword">double</span> s1 = fx1 * fy1;</span><br><span class="line">					<span class="keyword">double</span> s2 = (<span class="number">1.0</span> - fx1) * fy1;</span><br><span class="line">					<span class="keyword">double</span> s3 = (<span class="number">1.0</span> - fx1)*(<span class="number">1.0</span> - fy1);</span><br><span class="line">					<span class="keyword">double</span> s4 = fx1*(<span class="number">1.0</span> - fy1);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *双线性插值法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">					<span class="keyword">if</span>((j0 &gt;= <span class="number">0</span>) &amp;&amp; (j0 &lt; IWidth<span class="number">-1</span>) &amp;&amp; (i0 &gt;=<span class="number">0</span>)&amp;&amp; (i0 &lt;IHeight<span class="number">-1</span>))&#123;</span><br><span class="line">						*(pINewBuf+i*INewLineByte+j*<span class="number">3</span>+k) = *(pIBuf+i2*ILineByte+j2*<span class="number">3</span>+k)*s1</span><br><span class="line">														   +*(pIBuf+i1*ILineByte+j2*<span class="number">3</span>+k)*s2</span><br><span class="line">														   +*(pIBuf+i1*ILineByte+j1*<span class="number">3</span>+k)*s3</span><br><span class="line">														   +*(pIBuf+i2*ILineByte+j1*<span class="number">3</span>+k)*s4;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span>&#123;</span><br><span class="line">						*(pINewBuf+i*INewLineByte+j*<span class="number">3</span>+k)=<span class="number">255</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	SaveBmp(address,pINewBuf,INewWidth,INewHeight,biBitCount);</span><br><span class="line">	<span class="built_in">free</span>(pINewBuf);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="测试数据-输入、输出-3"><a href="#测试数据-输入、输出-3" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><p>​        在图像处理的初步学习中，有一张女像图非常经典，她是1972年一期《花花公子》杂志上的封面女郎——Lena，如下图：</p>
<img src="F:\大学事务\大一第二学期 事务\程序设计基础实验\lena\lena.bmp" style="zoom:50%;" />

<p>本题以此图作为示例。</p>
<p>​        原图<code>(lena.bmp)</code>的文件信息如下：大小768.1KB；尺寸：512*512；位深：24。</p>
<p>​        通过该程序，我尝试对原图分别缩放比例150、50（即前者放大1.5倍，后者缩小一半），命令行输入如下：</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\4.1.png)</p>
<p>程序运行结果如下：</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\4.5.png)</p>
<p>按照预期，放大1.5倍得到<code>lena2.bmp</code>；缩小0.5倍得到<code>lena3.bmp</code>.</p>
<p>查看相关文件信息如下：</p>
<p><img src="F:\大学事务\大一第二学期 事务\程序设计基础实验\4.2.png" style="zoom: 25%;" /><img src="F:\大学事务\大一第二学期 事务\程序设计基础实验\4.3.png" style="zoom:25%;" /></p>
<p>由上图可知 <code>lena2.bmp</code>的相关数据：大小：1.7MB；尺寸：768*768；位深：24。</p>
<p>可知<code>lena3.bmp</code>的相关数据：大小：192.1KB；尺寸：256*256；位深：24。</p>
<p>​        放缩效果符合预期，可证明程序正确。</p>
<hr>
<h3 id="第五题"><a href="#第五题" class="headerlink" title="第五题"></a>第五题</h3><p>RLE压缩解压算法</p>
<p>涉及知识点：文件读写、位操作、内存管理、结构体定义、RLW算法、命令行参数</p>
<p>要求：编写一个程序，可以在命令行输入参数，完成指定文件的压缩解压</p>
<p>命令行参数如下：<code>rle  file1  –c(-d)  file2</code></p>
<p>第一个参数为可执行程序名称，第二个参数为原始文件名，第三个参数为压缩或解压缩选项，第四个参数为新文件名</p>
<h4 id="问题分析-3"><a href="#问题分析-3" class="headerlink" title="问题分析"></a>问题分析</h4><p>​        关于这个算法的实现，真的是一头雾水。和第四题一样，我怀着<del>菜鸡的心理(划掉划掉)</del>谦逊的态度看了**<a target="_blank" rel="noopener" href="https://blog.csdn.net/orbit/article/details/7062218">这篇文章</a>**。以下内容基本就是基于这篇文章。有些概念性的东西就直接复制来了<del>（人类的本质是复读机？雾）</del>，请往下看：↓</p>
<p>​        RLE（Run Length Encoding）行程长度压缩算法（也称游程长度压缩算法），是最早出现，也是最简单的无损数据压缩算法。</p>
<p>​        RLE算法的基本思路是把数据按照线性序列分成两种情况：一种是连续的重复数据块，另一种是连续的不重复数据块。</p>
<blockquote>
<p>对于第一种情况，对连续的重复数据块进行压缩，压缩方法就是用一个表示块数的属性加上一个数据块代表原来连续的若干块数据。对于第二种情况，RLE算法有两种处理方法，一种处理方法是用和第一种情况一样的方法处理连续的不重复数据块，仅仅是表示块数的属性总是1；另一种处理方法是不对数据进行任何处理，直接将原始数据作为压缩后的数据。</p>
</blockquote>
<p>主要问题在于：</p>
<ul>
<li>第一，采用何种方式读入被压缩文件？</li>
<li>第二，对于上述文字描述的逻辑化程序，或者说RLE算法的具体实现问题及其代码。（核心问题）</li>
</ul>
<h4 id="解决方案-3"><a href="#解决方案-3" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li><p>对于待压缩文件的读入——以读入二进制源文件的形式；</p>
</li>
<li><p>实现RLE算法，具体描述见算法描述部分↓</p>
</li>
</ul>
<h4 id="算法描述-3"><a href="#算法描述-3" class="headerlink" title="算法描述"></a>算法描述</h4><ul>
<li><p>核心问题是对RLE算法的描述。此处需要分类讨论：</p>
<ul>
<li><p>对于连续相同的数据块组成，由上可知，经典的RLE算法处理就好了：即对连续的重复数据块进行压缩，压缩方法就是用一个表示块数的属性加上一个数据块代表原来连续的若干块数据。</p>
</li>
<li><p>对于连续的不重复数据块组成，对原有的RLE算法略微改变下，直接将连续不重复部分当做一个整体处理——这里采用一个和处理连续重复数据一样的标志，标识后面的数据是长度为n的连续不重复数据。这样的标志字节就相当于是数据块的块头部分，描述后面跟的数据类型以及数据长度。由于标志是始终存在于数据块的前面，因此就不需要区分标志字节和原始数据。</p>
<p>唯一需要区分的是标志字节后面跟的数据类型。区分的方法就是对标志字节的8个bit进行分工，用高位一个bit表示后面跟的数据类型，如果这个bit是1则表示后面跟的是连续重复的数据，如果这个bit是0则表示后面跟的是连续不重复的数据。标志字节的低7位bit存储一个数字（最大值是127），对于连续重复数据，这个数字表示需要重复的次数，对于连续不重复数据，这个数字表示连续不重复数据块的长度。</p>
</li>
</ul>
<p>对于**<em>压缩算法**</em>：首先设置搜索起始位置，算法开始时这个搜索起始位置就是原始数据的第一个字节。每次搜索就是从起始位置开始向后搜索比较数据，根据搜索比较结果，一种情况就是后面数据重复且数据长度超过2，则设置连续重复数据的标志，然后继续向后查找，直到找到第一个与之不相同的数据为止，将这个位置记为下次搜索的起始位置，根据位置差计算重复次数，连重复标志和重复次数以及原始数据一起写入压缩数据；另一种情况是后面的数据都没有连续重复的，则继续向后查找，直到找到连续重复的数据，然后设置不重复数据标志，将新位置记为下次搜索的起始位置，最后将标志字节写入压缩数据并将原始数据复制到压缩数据。从新的搜索起始位置重复上面的过程，直到原始数据结束。</p>
<p>对于**<em>解压缩算法**</em>：因为两种情况下的数据的首部都有标志，只要根据标志判断如何处理就可以了。首先从压缩数据中取出一个字节的标志字节，然后判断是连续重复数据的标志还是连续不重复数据的标志，如果是连续重复数据，则将标志字节后面的数据重复复制n份；如果是连续不重复数据，则将连续复制标志字节后面的n个数据。</p>
</li>
</ul>
<p>以上算法是对粗糙的普通的RLE算法的优化，以体现较为优越的压缩效果。</p>
<p>以下前两款源代码并不是实现以上算法描述中最终优化的形式。而是从最简单的RLE算法实现（1.0/2.0），再进行适当的调整优化。思路的启发同样来源于这篇<a target="_blank" rel="noopener" href="https://blog.csdn.net/orbit/article/details/7062218">参考文章</a>。而3.0版源代码是对上述实现的优化下的RLE算法的封装使用。（最终提交代码附件是2.0版，<strong>说明：3.0版本源代码来源于同学的分享，在算法流程、函数设计上有雷同，但基本思路是上述的算法描述</strong>）</p>
<h4 id="源代码-3"><a href="#源代码-3" class="headerlink" title="源代码"></a>源代码</h4><ul>
<li>源代码1.0，没经过优化的RLE算法，实际上只是对文本字符的识别压缩处理：(最简单的形式)↓</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*5.RLE压缩解压算法</span></span><br><span class="line"><span class="comment">涉及知识点：文件读写、位操作、内存管理、结构体定义、RLW算法、命令行参数</span></span><br><span class="line"><span class="comment">要求：编写一个程序，可以在命令行输入参数，完成指定文件的压缩解压</span></span><br><span class="line"><span class="comment">命令行参数如下：`rle  file1  –c(-d)  file2`</span></span><br><span class="line"><span class="comment">第一个参数为可执行程序名称，第二个参数为原始文件名，第三个参数为压缩或解压缩选项，第四个参数为新文件名</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">FILE *infile,*outfile;		 	<span class="comment">//定义全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span> *infilename,<span class="keyword">char</span> *outfilename)</span></span>;<span class="comment">//压缩函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deCompress</span><span class="params">(<span class="keyword">char</span> *infilename,<span class="keyword">char</span> *outfilename)</span></span>;<span class="comment">//解压函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> clone[<span class="number">2</span>];<span class="built_in">strcpy</span>(clone,argv[<span class="number">2</span>]);</span><br><span class="line">     <span class="keyword">if</span>(<span class="built_in">strcmp</span>(clone,<span class="string">&quot;-c&quot;</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">        compress(argv[<span class="number">1</span>],argv[<span class="number">3</span>]);<span class="comment">//调用函数compress()压缩数据</span></span><br><span class="line">	    fclose(infile);			<span class="comment">//关闭文件</span></span><br><span class="line">	    fclose(outfile);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(clone,<span class="string">&quot;-d&quot;</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">        deCompress(argv[<span class="number">1</span>],argv[<span class="number">3</span>]);                   <span class="comment">// 调用函数deCompress()解压数据</span></span><br><span class="line">	    fclose(infile);		                           <span class="comment">// 关闭文件</span></span><br><span class="line">	    fclose(outfile);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span> *infilename,<span class="keyword">char</span> *outfilename)</span><span class="comment">//压缩文件</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	infile=fopen(infilename,<span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    outfile=fopen(outfilename,<span class="string">&quot;wb&quot;</span>);</span><br><span class="line">	<span class="keyword">register</span> <span class="keyword">int</span> len;</span><br><span class="line">	<span class="keyword">char</span> first,seq;</span><br><span class="line">	first=fgetc(infile);   <span class="comment">// 取得文件第一个字符</span></span><br><span class="line">	seq=first;         <span class="comment">// 将第一个字符赋值给seq</span></span><br><span class="line">	len=<span class="number">1</span>;                <span class="comment">// 字符连续出现次数，长度初始化为1</span></span><br><span class="line">	<span class="keyword">while</span>(!feof(infile))			<span class="comment">//进行压缩</span></span><br><span class="line">	&#123;</span><br><span class="line">		first=fgetc(infile);   <span class="comment">// 取得文件的下一个字符</span></span><br><span class="line">		<span class="keyword">if</span>(first==seq)     <span class="comment">// 文件上一个字符是否与当前字符相等</span></span><br><span class="line">		&#123;</span><br><span class="line">			len++;            <span class="comment">// 相等则连续长度加一</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			fputc(len,outfile);</span><br><span class="line">			fputc(seq,outfile); <span class="comment">// 不相等，则输出连续的长度和对应字符</span></span><br><span class="line">			seq=first;       <span class="comment">// 将不相等的第一个字符赋值给seq，开始下次长度计算</span></span><br><span class="line">			len=<span class="number">1</span>;              <span class="comment">// 长度归一</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deCompress</span><span class="params">(<span class="keyword">char</span> *infilename,<span class="keyword">char</span> *outfilename)</span><span class="comment">//解压文件</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">register</span> <span class="keyword">int</span> len;</span><br><span class="line">	<span class="keyword">char</span> first;</span><br><span class="line">    infile=fopen(infilename,<span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    outfile=fopen(outfilename,<span class="string">&quot;wb&quot;</span>);</span><br><span class="line">	<span class="keyword">while</span>(!feof(infile))		                  <span class="comment">// 解压文件</span></span><br><span class="line">	&#123;</span><br><span class="line">		len=fgetc(infile);                    <span class="comment">// 读取的时候前面的字符是出现的次数</span></span><br><span class="line">		first=fgetc(infile);                   <span class="comment">// 后面的是对应的字符</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			fputc(first,outfile);<span class="comment">//“解压”：即是先读取该字符出现的次数，然后循环输出</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>源代码2.0，相较1.0版本有所优化↓</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(FILE *inFile, FILE *outFile)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deCompress</span><span class="params">(FILE *inFile, FILE *outFile)</span></span>;</span><br><span class="line"></span><br><span class="line">FILE *inFile,*outFile;</span><br><span class="line"><span class="keyword">int</span> mark;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> args,<span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(argv[<span class="number">2</span>],<span class="string">&quot;-c&quot;</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">        inFile=fopen(argv[<span class="number">1</span>],<span class="string">&quot;rb&quot;</span>);</span><br><span class="line">        outFile=fopen(argv[<span class="number">3</span>],<span class="string">&quot;wb&quot;</span>);</span><br><span class="line">        mark = compress(inFile,outFile);</span><br><span class="line">        fclose(inFile);fclose(outFile);</span><br><span class="line">        <span class="keyword">if</span>(mark==<span class="number">-1</span>)<span class="built_in">printf</span>(<span class="string">&quot;COMPRESSION FAIL!&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;COMPRESSION SUCCEED!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(argv[<span class="number">2</span>],<span class="string">&quot;-d&quot;</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">        inFile=fopen(argv[<span class="number">1</span>],<span class="string">&quot;rb&quot;</span>);</span><br><span class="line">        outFile=fopen(argv[<span class="number">3</span>],<span class="string">&quot;wb&quot;</span>);</span><br><span class="line">         mark = deCompress(inFile,outFile);</span><br><span class="line">        fclose(inFile);fclose(outFile);</span><br><span class="line">        <span class="keyword">if</span>(mark==<span class="number">-1</span>)<span class="built_in">printf</span>(<span class="string">&quot;DECOMPRESSION FAIL!&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;DECOMPRESSION SUCCEED!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(FILE *inFile, FILE *outFile)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> currChar;                       </span><br><span class="line">    <span class="keyword">int</span> prevChar;                      </span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> count;               </span><br><span class="line"></span><br><span class="line">    prevChar = EOF;     </span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((currChar = fgetc(inFile)) != EOF)&#123;</span><br><span class="line">        fputc(currChar, outFile);</span><br><span class="line">        <span class="keyword">if</span> (currChar == prevChar)&#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> ((currChar = fgetc(inFile)) != EOF)&#123;</span><br><span class="line">                <span class="keyword">if</span> (currChar == prevChar)&#123;</span><br><span class="line">                    count++;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (count == UCHAR_MAX)&#123;</span><br><span class="line">                        fputc(count, outFile);</span><br><span class="line">                        prevChar = EOF;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    fputc(count, outFile);</span><br><span class="line">                    fputc(currChar, outFile);</span><br><span class="line">                    prevChar = currChar;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            prevChar = currChar;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (currChar == EOF)&#123;</span><br><span class="line">            fputc(count, outFile);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deCompress</span><span class="params">(FILE *inFile, FILE *outFile)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> currChar;                       </span><br><span class="line">    <span class="keyword">int</span> prevChar;                       </span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> count;                </span><br><span class="line"></span><br><span class="line">    prevChar = EOF;    </span><br><span class="line">    <span class="keyword">while</span> ((currChar = fgetc(inFile)) != EOF)&#123;</span><br><span class="line">        fputc(currChar, outFile);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (currChar == prevChar)&#123; </span><br><span class="line">            count = fgetc(inFile);</span><br><span class="line">            <span class="keyword">while</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                fputc(currChar, outFile);</span><br><span class="line">                count--;</span><br><span class="line">            &#125;</span><br><span class="line">            prevChar = EOF;    </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            prevChar = currChar;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="测试数据-输入、输出-4"><a href="#测试数据-输入、输出-4" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><ul>
<li><p>对于<strong>源代码1.0</strong>，经实践，仅可以压缩文本（对于图像音频压缩效果不好）——示例如下：</p>
<ul>
<li><p>win自带的<code>cmd</code>命令行输入↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.1.png)</p>
</li>
<li><p>生成结果↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.2.png)</p>
</li>
<li><p>对照结果↓</p>
<img src="F:\大学事务\大一第二学期 事务\程序设计基础实验\5.3.png" style="zoom: 50%;" />

</li>
</ul>
</li>
</ul>
<p>以上是RLE最简单的实现方式。可以压缩<code>.txt</code>文件，对文本文件的压缩效果显著。但是对于图像。音频文件，因为其本质是二进制源文件，所以源代码1.0效果不好。不过，经尝试——将文件压缩–&gt;再进行解压，得到文件与原文件一致，可见RLE算法压缩的确是无损压缩。</p>
<ul>
<li><p>对于<strong>源代码2.0</strong>，相较于1.0版本有所改善，以下先从较为简单的压缩示例开始：</p>
<ul>
<li><p>示例一：纯色黑的<code>.bmp</code>图像文件</p>
<img src="F:\练习\c++\VSCodePractice\大一下程序设计基础实验\black.bmp" style="zoom:33%;" />

<ul>
<li><p>命令行输入↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.4.png)</p>
<p>由上图可知，压缩/解压缩成功！</p>
</li>
<li><p>压缩效果↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.5.png)</p>
</li>
</ul>
</li>
</ul>
<p>压缩很成功的。而且效果显著——有上图可知，从2188KB–&gt;26KB，压缩效率高；而且也成功还原（解压缩）。</p>
<ul>
<li><p>示例二：非纯色的<code>.bmp</code>图像文件↓</p>
<img src="F:\练习\c++\VSCodePractice\大一下程序设计基础实验\color.bmp" style="zoom:33%;" />

<ul>
<li><p>命令行输入↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.8.png)</p>
</li>
<li><p>压缩效果↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.9.png)</p>
<p>​        压缩效果相当不错，从2188KB压缩到27KB，并且成功还原（解压缩）。可见该算法对<code>.bmp</code>格式的较为简洁（由若干图形组成，颜色单一[黑白]）的图像文件压缩效率很高。</p>
<p>​        另外，经试验，在以”复杂“的位图比如说第四题用的<code>lena.bmp</code>为示例时，压缩后体积出现轻微膨胀，一方面，由于我的代码（算法）依然有优化空间，我可以按照参考文章中方式设计算法，压缩结果也许会漂亮一些；另一方面，这可能和RLE压缩算法局限性有关。在源文件中出现连续不相同编码时，RLE算法压缩会产生负效益。因此，即使对应的优化（如上文中的算法描述）也很难达到压缩的最佳效果。</p>
</li>
</ul>
</li>
<li><p>示例三：<code>.flac</code>的音频文件</p>
<ul>
<li><p>命令行输入↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.6.png)</p>
<p>由上图可知，压缩/解压缩成功！</p>
</li>
<li><p>压缩效果↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\5.7.png)</p>
<p>可以看到，从2775KB–&gt;2766KB，有压缩的痕迹，但效果不好。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>源代码3.0</strong>，经试验，发现对于同样地音频文件（如上），压缩效果不如2.0，此处就不加展示了。实属令我迷惑不知所解；可能由于RLE算法的压缩效率和文件内容紧密相关，对于一些文件的源文本形式连续重复内容少见，导致压缩效果不好，甚至出现压缩后膨胀——应该是很常见的。</p>
</li>
</ul>
<hr>
<h3 id="第六题"><a href="#第六题" class="headerlink" title="第六题"></a>第六题</h3><p> 简单文件数据库-模拟图书馆管理系统</p>
<p>涉及知识点：文件读写、内存管理、结构体定义、基本数据结构、高级格式化输入输出</p>
<p>要求：编写一个程序模拟图书管理系统。用户分为管理员和读者两类，分别显示不同文本格式菜单，通过菜单项对应数字进行选择。读者菜单包括借书、还书、查询等功能。管理员菜单包括图书和读者信息录入、修改和删除。图书信息至少应包括：编号、书名、数量，读者信息至少应包括：编号、姓名、所借图书。可根据图书名称或编号进行图书信息查询，可查询某本书现在被哪些读者借走。</p>
<p>命令行参数如下：<code>Libsim –a(-u)  xxxx</code></p>
<p>第一个参数为可执行程序名称；第二个参数为用户身份，-a表示管理员，-u表示读者；第三个参数为用户名</p>
<h4 id="问题分析-4"><a href="#问题分析-4" class="headerlink" title="问题分析"></a>问题分析</h4><p>当真祖传作业——图书管理系统。附上<a target="_blank" rel="noopener" href="https://blog.csdn.net/k_young1997/article/details/73480766">参考文章</a>，以下直入主题：</p>
<ul>
<li>第一个问题，关于输入命令行参数：<code>main</code>函数有两个参数：<code>argc</code>与<code>argv</code>，前者是一个整数，表示命令行给程序参数的个数，后者是一个字符串数组，用于顺序存放命令行传给程序的参数，通过<code>argc</code>与<code>argv</code>，来实现对命令行参数的处理。显然地，此题中需要传入三个参数，由题所示：</li>
</ul>
<blockquote>
<p>第一个参数为可执行程序名称；第二个参数为用户身份，-a表示管理员，-u表示读者；第三个参数为用户名。</p>
</blockquote>
<ul>
<li>第二个问题：对于图书管理系统各项功能该如何实现？</li>
<li>第三个问题：怎样让一个命令行式的图书管理系统用起来顺手？（凑一个问题）</li>
</ul>
<h4 id="解决方案-4"><a href="#解决方案-4" class="headerlink" title="解决方案"></a>解决方案</h4><ul>
<li><p>对于输入参数我们进行一下分析：<code>argv[]</code>中三个元素，其中<code>argv[0]</code>传入执行文件名<code>**(.exe)</code>；<code>argv[1]</code>传入用户身份，或读者，或管理员；<code>argv[2]</code>中传入用户名。</p>
</li>
<li><p>在OOP的C++或Java课程里面，可以设计<code>class</code>来实现，非常方便强大。而对于C语言而言，图书管理系统中的各项功能可以封装成函数，通过参数列表或者指针构成联系。</p>
</li>
<li><p>对于命令行式的图书管理系统，采用<strong>菜单模块与按键交互（输入序号选择）相结合</strong>的设计。<del>(咳咳…这不是废话嘛 题目都明明白白写了……）</del></p>
</li>
</ul>
<h4 id="算法描述-4"><a href="#算法描述-4" class="headerlink" title="算法描述"></a>算法描述</h4><ul>
<li><p>管理员层面的操作函数算法设计：</p>
<ul>
<li><p>对于增加书的信息：（设计书的计数器）</p>
<ul>
<li>直接向文件写入增加的书目，同时，计数器加一。</li>
</ul>
</li>
<li><p>对于修改书的信息：</p>
<ul>
<li><p>从文件读出数据；</p>
</li>
<li><p>输入待修改书ID或Title，修改数据；</p>
</li>
<li><p>向文件重新写入数据。</p>
</li>
</ul>
</li>
<li><p>对于删除书的信息：</p>
<ul>
<li>从文件读出数据；</li>
<li>输入待删除书ID或Title，将该书以后索引向前移动一位（覆盖该书）。计数器减一；</li>
<li>向文件重新写入数据。</li>
</ul>
</li>
<li><p>对于增加、修改、删除读者信息和上面对书的操作类似，此处不加以赘述。</p>
</li>
</ul>
</li>
<li><p>读者层面的操作函数算法设计：</p>
<ul>
<li>借书操作<ul>
<li>展示所有书籍<code>（showAllbooks）</code>，输入要借的书；</li>
<li>读入数据，修改信息（书的存量、借书人等）；</li>
<li>重新写入数据。</li>
</ul>
</li>
<li>还书操作<ul>
<li>展示所有书籍<code>（showAllbooks）</code>，输入要还的书；</li>
<li>读入数据，修改信息（书的存量、借书人等）；</li>
<li>重新写入数据。</li>
</ul>
</li>
<li>查询<ul>
<li>从文件读出数据；</li>
<li>输入所查询书关键字（ID或Title书名）；</li>
<li>遍历数据，输出信息。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>以下源代码仅仅是实现上述若干功能，比较精简。为了使图书管理系统臻于完美，应当需要更加丰富的功能设计以及更加多样合理的数据结构（链表的适当使用）。</p>
<h4 id="源代码-4"><a href="#源代码-4" class="headerlink" title="源代码"></a>源代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*6.简单文件数据库-模拟图书馆管理系统</span></span><br><span class="line"><span class="comment">涉及知识点：文件读写、内存管理、结构体定义、基本数据结构、高级格式化输入输出</span></span><br><span class="line"><span class="comment">要求：</span></span><br><span class="line"><span class="comment">编写一个程序模拟图书管理系统。用户分为管理员和读者两类，</span></span><br><span class="line"><span class="comment">分别显示不同文本格式菜单，通过菜单项对应数字进行选择。</span></span><br><span class="line"><span class="comment">读者菜单包括借书、还书、查询等功能。</span></span><br><span class="line"><span class="comment">管理员菜单包括图书和读者信息录入、修改和删除。</span></span><br><span class="line"><span class="comment">图书信息至少应包括：编号、书名、数量，</span></span><br><span class="line"><span class="comment">读者信息至少应包括：编号、姓名、所借图书。</span></span><br><span class="line"><span class="comment">可根据图书名称或编号进行图书信息查询，可查询某本书现在被哪些读者借走。</span></span><br><span class="line"><span class="comment">命令行参数如下：</span></span><br><span class="line"><span class="comment">Libsim  –a(-u)  xxxx</span></span><br><span class="line"><span class="comment">第一个参数为可执行程序名称；</span></span><br><span class="line"><span class="comment">第二个参数为用户身份，-a表示管理员，-u表示读者；</span></span><br><span class="line"><span class="comment">第三个参数为用户名</span></span><br><span class="line"><span class="comment">*/</span>          </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span> <span class="comment">//图书信息至少应包括：编号、书名、数量</span></span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>]; <span class="comment">//编号</span></span><br><span class="line">    <span class="keyword">char</span> title[<span class="number">101</span>];<span class="comment">//书名</span></span><br><span class="line">    <span class="keyword">int</span> num;<span class="comment">//数量</span></span><br><span class="line">    <span class="keyword">char</span> borrowMan[<span class="number">100</span>][<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;<span class="comment">//借阅人数</span></span><br><span class="line">&#125;book;</span><br><span class="line">book books[<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span><span class="comment">//读者信息至少应包括：编号、姓名、所借图书。</span></span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">101</span>];</span><br><span class="line">    <span class="keyword">char</span> bookName[<span class="number">10</span>] =<span class="string">&quot;&quot;</span>;<span class="comment">//借书</span></span><br><span class="line">&#125;reader;</span><br><span class="line">reader readers[<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> countBook = <span class="number">0</span>;<span class="comment">//书的编号</span></span><br><span class="line"><span class="keyword">int</span> countReader = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">readerView</span><span class="params">(<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">adminView</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">borrowBook</span><span class="params">(<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">returnBook</span><span class="params">(<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addBook</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modBook</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delBook</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">autoAddReader</span><span class="params">(<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addReader</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modReader</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delReader</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showAllbook</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> iden[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">char</span> name[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</span></span>&#123;</span><br><span class="line">    <span class="built_in">strcpy</span>(name,argv[<span class="number">2</span>]);</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*************************欢迎使用图书管理系统*************************\n&quot;</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(iden,argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(iden,<span class="string">&quot;-a&quot;</span>)==<span class="number">0</span>)&#123;<span class="comment">//-a表示管理员</span></span><br><span class="line">        adminView();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(iden,<span class="string">&quot;-u&quot;</span>)==<span class="number">0</span>)&#123;<span class="comment">//-u表示读者</span></span><br><span class="line">        readerView(name);<span class="comment">//autoAddReader(name);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*****************************您已退出！******************************\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">readerView</span><span class="params">(<span class="keyword">char</span> *readerName)</span></span>&#123;<span class="comment">//读者菜单包括借书、还书、查询等功能。</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---------读者菜单:-----------\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1、借书;\n2、还书;\n3、查询.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;4、退出.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------------------\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;输入序号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">switch</span> (n)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        borrowBook(readerName);readerView(readerName);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        returnBook(readerName);readerView(readerName);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        search();readerView(readerName);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">printf</span>(<span class="string">&quot;退出成功!&quot;</span>);<span class="built_in">exit</span>(<span class="number">0</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;---------输入异常，请重新输入:-----------\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;--------------------\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        readerView(iden);;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">adminView</span><span class="params">()</span></span>&#123;<span class="comment">//管理员菜单包括图书和读者信息录入、修改和删除。</span></span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;----------管理员菜单:----------\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1、读者信息录入;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2、读者信息修改;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3、读者信息删除;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;4、图书信息录入;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5、图书信息修改;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;6、图书信息删除.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;7、展示所有图书信息\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;8、退出.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------------------\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;输入序号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    <span class="keyword">switch</span> (m)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:addReader();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:modReader();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:delReader();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:addBook();</span><br><span class="line">       adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:modBook();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:delBook();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:showAllbook();</span><br><span class="line">        adminView();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:<span class="built_in">printf</span>(<span class="string">&quot;退出成功!&quot;</span>);<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;-----------输入异常，请重新输入:-----------\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------------------\n&quot;</span>);</span><br><span class="line">    adminView();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*借书*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">borrowBook</span><span class="params">(<span class="keyword">char</span> name[<span class="number">20</span>])</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> bid[<span class="number">10</span>];</span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    countBook = booknum;</span><br><span class="line">    showAllbook();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想要借哪本书?请输入编号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,bid);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(bid,books[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            books[i].num--;</span><br><span class="line">            <span class="built_in">strcpy</span>(books[i].borrowMan[books[i].cnt],name);</span><br><span class="line">            books[i].cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fp=fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,books[i].id,books[i].title,books[i].num);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;借书成功!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*还书*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">returnBook</span><span class="params">(<span class="keyword">char</span> name[<span class="number">20</span>])</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> bid[<span class="number">10</span>];</span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    countBook = booknum;</span><br><span class="line">    showAllbook();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想要还哪本书？输入编号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,bid);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(bid,books[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            books[i].num++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;books[i].cnt;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">strcmp</span>(books[i].borrowMan[j],name)==<span class="number">0</span>)&#123;</span><br><span class="line">                   <span class="built_in">memset</span>(books[i].borrowMan[j],<span class="number">0</span>,<span class="keyword">sizeof</span>(books[i].borrowMan[j]));</span><br><span class="line">                   books[i].cnt--;</span><br><span class="line">                   fp=fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;countBook;k++)&#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,books[k].id,books[k].title,books[k].num);</span><br><span class="line">                    &#125;</span><br><span class="line">                    fclose(fp);</span><br><span class="line">                   <span class="built_in">printf</span>(<span class="string">&quot;还书成功!&quot;</span>);<span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*增加 书*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>],title[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">int</span> booknum=countBook;</span><br><span class="line">    </span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n请按以下格式输入图书信息:编号(ID) 书名(Title) 数量(Num)\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;请输入图书编号:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,books[booknum].id);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;请输入图书书名:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,books[booknum].title);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;请输入存书数量:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;books[booknum].num);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">            books[booknum].id,books[booknum].title,books[booknum].num);</span><br><span class="line">        fclose(fp);</span><br><span class="line">        booknum++;</span><br><span class="line">        countBook = booknum;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;图书增加成功!\n&quot;</span>);</span><br><span class="line">        adminView();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改 书*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> btitle[<span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    countBook = booknum;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想修改哪本书？请输入ID或书名:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,btitle);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(btitle,books[i].title)==<span class="number">0</span>||<span class="built_in">strcmp</span>(btitle,books[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-----------------该书详情-----------------\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;图书编号: %s \n&quot;</span>,books[i].id);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;图书书名:《%s》\n&quot;</span>,books[i].title);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;存书数量: %d 本\n&quot;</span>,books[i].num);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-----------------分割线-----------------\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;你想把图书书名变动为:&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,books[i].title);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;你想把图书数量变动为:&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;books[i].num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fp=fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,books[i].id,books[i].title,books[i].num);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;修改成功!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    adminView();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除 书*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> btitle[<span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想删除哪本书？请输入ID或书名:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,btitle);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;booknum;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(btitle,books[i].title)==<span class="number">0</span>||<span class="built_in">strcmp</span>(btitle,books[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;booknum<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                books[j] = books[j+<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            booknum--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    countBook = booknum;</span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;booknum;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,books[i].id,books[i].title,books[i].num);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n删除成功!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">autoAddReader</span><span class="params">(<span class="keyword">char</span>* name)</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">int</span> readernum=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,</span><br><span class="line">				readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">        	readernum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    countReader = readernum;</span><br><span class="line">    <span class="built_in">strcpy</span>(readers[readernum].name,name);</span><br><span class="line">    fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>];</span><br><span class="line">    itoa(readernum+<span class="number">1</span>,id,<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(readers[readernum].id,id);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">    fclose(fp);</span><br><span class="line">    readernum++;</span><br><span class="line">    countReader = readernum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addReader</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> id[<span class="number">10</span>];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">int</span> readernum=<span class="number">0</span>;</span><br><span class="line">     fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,</span><br><span class="line">				readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">        	readernum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请按以下格式输入读者信息:编号(ID) 名字(Name) \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;增加的读者编号为:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,readers[readernum].id);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;增加的读者名字为:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,readers[readernum].name);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,</span><br><span class="line">    readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">    fclose(fp);</span><br><span class="line">    readernum++;</span><br><span class="line">    countReader = readernum;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;读者增加成功!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modReader</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> rtitle[<span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> readernum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,</span><br><span class="line">				readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">        	readernum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    countReader = readernum;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想修改哪个读者？请输入ID或名字:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,rtitle);</span><br><span class="line">    countReader = readernum;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countReader;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(rtitle,readers[i].name)==<span class="number">0</span>||<span class="built_in">strcmp</span>(rtitle,readers[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;----------------该读者详情----------------\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;读者编号: %s &quot;</span>,readers[i].id);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;读者名字: %s &quot;</span>,readers[i].name);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;所借的书: %s \n&quot;</span>,readers[i].bookName);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-----------------分割线-----------------\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;你想把名字变动为:&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,readers[i].name);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;你想把所借书名变动为:&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,readers[i].bookName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fp=fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countReader;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,readers[i].id,readers[i].name,readers[i].bookName);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;修改成功!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delReader</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">char</span> rtitle[<span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    fp = fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> readernum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,</span><br><span class="line">				readers[readernum].id,readers[readernum].name,readers[readernum].bookName);</span><br><span class="line">        	readernum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想删除哪个读者？请输入ID或名字:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,rtitle);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;readernum;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(rtitle,readers[i].name)==<span class="number">0</span>||<span class="built_in">strcmp</span>(rtitle,readers[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;readernum<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                readers[i] = readers[i+<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            readernum--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    countReader = readernum;</span><br><span class="line">    fp=fopen(<span class="string">&quot;readerData.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;readernum;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %s\n&quot;</span>,readers[i].id,readers[i].name,readers[i].bookName);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n删除成功!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> btitle[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">char</span> bid[<span class="number">10</span>];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    countBook = booknum;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你想查询哪本书？请输入ID或书名:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,btitle);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(btitle,books[i].title)==<span class="number">0</span>||<span class="built_in">strcmp</span>(btitle,books[i].id)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-----------------查询详情-----------------\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;图书编号: %s \n&quot;</span>,books[i].id);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;图书书名:《%s》\n&quot;</span>,books[i].title);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;存书数量: %d 本\n&quot;</span>,books[i].num);<span class="comment">//12</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;借书人有:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;books[i].cnt;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">strlen</span>(books[i].borrowMan[j])!=<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%s &quot;</span>,books[i].borrowMan[j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-----------------查询结束-----------------\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fp=fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;countBook;i++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,books[i].id,books[i].title,books[i].num);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showAllbook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    book bookInfo[<span class="number">100</span>];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;library.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> booknum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp))&#123;</span><br><span class="line">        	<span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s %s %d\n&quot;</span>,</span><br><span class="line">				books[booknum].id,books[booknum].title,&amp;books[booknum].num);</span><br><span class="line">        	booknum++;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;-----------------所有书-----------------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;booknum;i++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;编号%s-书名《%s》-数量%d\n&quot;</span>,books[i].id,books[i].title,books[i].num);<span class="comment">//11</span></span><br><span class="line">    &#125;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;-----------------分割线-----------------\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="测试数据-输入、输出-5"><a href="#测试数据-输入、输出-5" class="headerlink" title="测试数据(输入、输出)"></a>测试数据(输入、输出)</h4><ul>
<li><p>首先，我们先测试<strong>管理员</strong>菜单的若干操作：</p>
<ul>
<li><p>增加书<code>addBook()</code>↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\addBook.png)</p>
<p>如上图，我测试增加两本书：</p>
<p>分别为：编号<code>2</code>-书名《C++编程》-数量<code>123</code>；编号<code>3</code>-书名《javaBasic》-数量<code>23</code></p>
<p>增加结果如下：（调用自定义的函数<code>showAllbook()</code>，即菜单栏7、展示所有图书信息）↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\showAllBook.png)</p>
<p>由上图可知，增加成功！</p>
</li>
<li><p>修改书<code>modBook()</code>↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\modBook.png)</p>
<p>如上图，我将编号<code>3</code>图书进行修改：</p>
<p>我将图书：编号<code>3</code>-书名《javaBasic》-数量<code>23</code>修改为图书：编号<code>3</code>-书名《SpringBoot》-数量<code>12</code>  </p>
<p>测试结果如下↓（同样选择菜单栏7、展示所有图书信息）</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\Modshow.png)</p>
<p>由上图可知，修改成功！</p>
</li>
<li><p>删除书<code>delBook()</code>↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\DelBook.png)</p>
<p>由上图，测试删除编号为<code>2</code>的图书，结果如下：</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\Delshow.png)</p>
<p>只输出编号<code>3</code>的图书，说明删除成功！</p>
<p><strong>另外要说明的是，以上所有功能（4个）都与文件的读写操作相关——上文中源代码亦可以体现。以上功能函数基本实现了上文中预期的算法描述</strong></p>
</li>
<li><p>最后，我们测试读者信息的录入、修改、删除（即菜单栏里的<code>1、2、3</code>）。因为读者信息的交互处理和图书信息的交互处理十分类似，报告中不再重复演示，从算法原理上看，以及源代码上看——演示效果是相当的。</p>
</li>
</ul>
</li>
<li><p>以上是<strong>管理员</strong>菜单的操作测试，以下是<strong>读者</strong>菜单的操作测试↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\reader.png)</p>
<p>由↑可知，命令行参数为<code>6 -u reader</code>，其中reader为读者名字。</p>
<ul>
<li><p>借书<code>borrowBook()</code>↓</p>
<p> 承接上文中对管理员菜单的测试，可知书库中只有图书：编号<code>3</code>-书名《SpringBoot》-数量<code>12</code>  。</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\borrow.png)</p>
<p>结果如下↓（调用<code>research()</code>，即菜单栏3、查询）</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\research1.png)</p>
<p>结果图书数量12本—&gt;11本；借书人名字<code>reader</code>被打印出，测试结果正确。</p>
</li>
<li><p>还书<code>returnBook()</code>↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\return.png)</p>
<p>结果如下↓</p>
<p>![](F:\大学事务\大一第二学期 事务\程序设计基础实验\research2.png)</p>
<p>结果图书数量11本—&gt;12本；借书人名字<code>reader</code>被打印出，测试结果正确。</p>
</li>
<li><p>查询<code>research()</code>↓</p>
<p>上述借书<code>borrowBook()</code>以及还书<code>returnBook()</code>的测试中——都使用查询<code>research()</code>，此处不再单独演示。</p>
</li>
</ul>
</li>
</ul>
<h3 id="《课程设计》总结（体会、感想）"><a href="#《课程设计》总结（体会、感想）" class="headerlink" title="《课程设计》总结（体会、感想）"></a><strong>《课程设计》总结（体会、感想）</strong></h3><p>​        肉眼可见的工作量之大，查资料、写代码、写报告颇让人疲惫。虽然6道题写了很长时间，但是也学到很多C语言相关以及拓展的知识，以及独立学习、借鉴外界资料（CSDN博客、<code>github</code>项目）进行编程达到一定目的（练习如上6道题）的能力的锻炼。</p>
<p>​        总而言之，这次实践是一次好的尝试，有所旁失，也有所收获。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Eason Zhao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://choeruii.github.io/2020/10/01/%E3%80%8A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E3%80%8B%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/">https://choeruii.github.io/2020/10/01/%E3%80%8A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E3%80%8B%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/10/01/first-piece-of-blog/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">拖延症小赵的第一篇blog</div></div></a></div></nav></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By Eason Zhao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>